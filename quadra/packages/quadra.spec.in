Summary: Multiplayer puzzle game
Name: quadra
Version: @VERSION@
Release: 1
Copyright: LGPL
Group: Amusements/Games
URL: http://quadra.sourceforge.net/
Source: quadra-%{version}.tar.gz
Vendor: Ludus Design
BuildRoot: /var/tmp/quadra-root

%package svga
Summary: Svgalib driver for Quadra
Group: Amusements/Games
Requires: quadra = %{version}

%description
This is the official release %{version} of Quadra, a full-featured
multiplayer action puzzle game for the X Window System and Svgalib.
Features include:

 - Recursive block chaining
 - Blocks shadows
 - Teams playing
 - TCP/IP networking (free Internet playing!)
 - Smooth block falling
 - Sound effects
 - Watches on other players
 - Chat window
 - CD-based music
 - And much more!

%description svga
This package contains the optional Svgalib driver. Install this
package if you want to be able to play Quadra in the console.

%prep
%setup -q
CXXFLAGS="$RPM_OPT_FLAGS" \
	./configure

%build
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT/usr/games
mkdir -p $RPM_BUILD_ROOT/usr/lib/games
install quadra $RPM_BUILD_ROOT/usr/games/quadra
install quadra.res $RPM_BUILD_ROOT/usr/lib/games/quadra.res
install quadra-svga.so $RPM_BUILD_ROOT/usr/lib/games/quadra-svga.so

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%attr(0755,root,root) /usr/games/quadra
%attr(0644,root,root) /usr/lib/games/quadra.res
%attr(0755,root,root) /usr/lib/games/quadra-svga.so
%doc ChangeLog LICENSE README NEWS images/quadra.xpm

%files svga
%attr(0755,root,root) /usr/lib/games/quadra-svga.so

